<!DOCTYPE html>
<meta charset="utf-8">
<head>
	
	<style>
	
		.node {
		  stroke: #fff;
		  stroke-width: 1.5px;
		}
		
		.gnode text {
		  pointer-events: none;
		  font: 10px "Helvetica Neue";
		}
	
		.link {
		  stroke: #999;
		  stroke-opacity: .6;
		}
		
	
	</style>

	<style>
		  #selectable { 
		  	width: 500; 
		  	margin: 3px; 
		  	margin-left: 50px;
		  	padding: 15px; 
		  	text-align: justify; 
		  	font-family: "Helvetica Neue", Helvetica, "Segoe UI";
		  	color: black;
		  	font-size: 0.8em; 
		  	height: 18px; 
		  }
	</style>
</head>
<body bgcolor="#DDD6CF">
	
	<div id="shelf" style = "width:624; float:left; height:100%; overflow-y: auto;">
		<img src="covers/bookshelf.jpg" width="624" height="1244" alt="bookshelf" usemap="#bookshelf">
	

		<map name="bookshelf">
  			<area shape="rect" coords="81,146,144,258" alt="The Story of Philosophy" onMouseOver="getGraph(13)">
  	
		</map>
	</div>


	   	<script src="http://d3js.org/d3.v2.min.js?2.9.6"></script>
		<script>
		
			var graph = {
			  "nodes":[
			    {"name":"Sapiens","node":0,"group":1},
			    {"name":"Being Different","node":1,"group":1},
			    {"name":"Running with the Mind of Meditation","node":2,"group":2},
			    {"name":"Creative Confidence","node":3,"group":3},
			    {"name":"Zero to One","node":4,"group":4},
			    {"name":"The Perfect Thing","node":5,"group":4},
			    {"name":"The Last Lecture","node":6,"group":5},
			    {"name":"Autobiography of a Yogi","node":7,"group":2},
			    {"name":"Breaking India","node":8,"group":2},
			    {"name":"The Art of War","node":9,"group":6},
			    {"name":"Life Ahead","node":10,"group":7},
			    {"name":"The Tao of Physics","node":11,"group":7},
			    {"name":"Uncommon Wisdom","node":12,"group":7},
			    {"name":"The Story of Philosphy","node":13,"group":7},
			    {"name":"Man's Search for Meaning","node":14,"group":7},
			    {"name":"Animal Farm","node":15,"group":8},
			    {"name":"Predictably Irrational","node":16,"group":9},
			    {"name":"Thinking Fast and Slow","node":17,"group":9},
			    {"name":"The Web of Life","node":18,"group":10},
			    {"name":"Relativity","node":19,"group":10},
			    {"name":"1984","node":20,"group":11},
			    {"name":"Outliers","node":21,"group":11},
			    {"name":"Why we work","node":22,"group":12}
			  ],
			  "links":[
			    {"source":1,"target":0,"value":10},
			    {"source":18,"target":0,"value":2},
			    {"source":2,"target":1,"value":6},
			    {"source":7,"target":1,"value":6},
			    {"source":8,"target":1,"value":6},
			    {"source":9,"target":1,"value":2},
			    {"source":10,"target":1,"value":2},
			    {"source":13,"target":1,"value":2},
			    {"source":14,"target":1,"value":2},
			    {"source":7,"target":2,"value":10},
			    {"source":8,"target":2,"value":10},
			    {"source":9,"target":2,"value":6},
			    {"source":10,"target":2,"value":6},
			    {"source":13,"target":2,"value":6},
			    {"source":14,"target":2,"value":6},
			    {"source":4,"target":3,"value":6},
			    {"source":5,"target":3,"value":6},
			    {"source":5,"target":4,"value":10},
			    {"source":15,"target":5,"value":2},
			    {"source":20,"target":6,"value":6},
			    {"source":21,"target":6,"value":6},
			    {"source":8,"target":7,"value":10},
			    {"source":9,"target":7,"value":6},
			    {"source":10,"target":7,"value":6},
			    {"source":13,"target":7,"value":6},
			    {"source":14,"target":7,"value":6},
			    {"source":9,"target":8,"value":6},
			    {"source":10,"target":8,"value":6},
			    {"source":13,"target":8,"value":6},
			    {"source":14,"target":8,"value":6},
			    {"source":15,"target":8,"value":6},
			    {"source":10,"target":9,"value":2},
			    {"source":13,"target":9,"value":2},
			    {"source":14,"target":9,"value":2},
			    {"source":11,"target":10,"value":10},
			    {"source":12,"target":10,"value":10},
			    {"source":13,"target":10,"value":10},
			    {"source":14,"target":10,"value":10},
			    {"source":22,"target":10,"value":6},
			    {"source":13,"target":10,"value":2},
			    {"source":14,"target":10,"value":2},
			    {"source":12,"target":11,"value":10},
			    {"source":13,"target":11,"value":10},
			    {"source":14,"target":11,"value":10},
			    {"source":22,"target":11,"value":6},
			    {"source":12,"target":11,"value":2},
			    {"source":19,"target":11,"value":2},
			    {"source":13,"target":12,"value":10},
			    {"source":14,"target":12,"value":10},
			    {"source":22,"target":12,"value":6},
			    {"source":19,"target":12,"value":2},
			    {"source":14,"target":13,"value":10},
			    {"source":22,"target":13,"value":6},
			    {"source":14,"target":13,"value":2},
			    {"source":22,"target":14,"value":6},
			    {"source":17,"target":16,"value":10},
			    {"source":19,"target":18,"value":10},
			    {"source":21,"target":20,"value":10},
			    {"source":22,"target":21,"value":6}
			   ]
			};
			
			var width = 500;
			    height = 500;
			
			var color = d3.scale.category20();
			
			var force = d3.layout.force()
			    .charge(-120)
			    .linkDistance(150)
			    .size([width, height]);
			
			var svg = d3.select("body").append("svg")
			    .attr("width", width)
			    .attr("height", height)
			    .attr("float", "right")
			    .attr("style", "margin-top:50px");
	
			var drawGraph = function(book) {
			  
			  force
			      .nodes(graph.nodes)
			      .links(graph.links)
			      .start();
			
			  var link = svg.selectAll(".link")
			      .data(graph.links)
			      .enter().append("line")
			      .attr("class", "link")
			      .style("stroke-width", function(d) { return Math.sqrt(d.value); });
			
			  var gnodes = svg.selectAll('g.gnode')
			     .data(graph.nodes)
			     .enter()
			     .append('g')
			     .classed('gnode', true);
			    
			  var node = gnodes.append("circle")
			      .attr("class", "node")
			      .attr("r", 10)
			      .style("fill", function(d) { return color(d.group); })
			      .call(force.drag)
			      .on('dblclick', connectedNodes); //Added code 
			
			  var labels = gnodes.append("text")
			      .attr("dx", 12)
      			      .attr("dy", ".35em")
			      .text(function(d) { return d.name; });
			
			  force.on("tick", function() {
			    link.attr("x1", function(d) { return d.source.x; })
			        .attr("y1", function(d) { return d.source.y; })
			        .attr("x2", function(d) { return d.target.x; })
			        .attr("y2", function(d) { return d.target.y; });
			
			    gnodes.attr("transform", function(d) { 
			        return 'translate(' + [d.x, d.y] + ')'; 
			    });
			  });
			};
			
			drawGraph(book);

	    		function getGraph(node){
            			force.stop();
            		}
            		
            		/* Highlighting Part */
            		
            		//Toggle stores whether the highlighting is on
			var toggle = 0;
			//Create an array logging what is connected to what
			var linkedByIndex = {};
			for (i = 0; i < graph.nodes.length; i++) {
			    linkedByIndex[i + "," + i] = 1;
			};
			graph.links.forEach(function (d) {
			    linkedByIndex[d.source.index + "," + d.target.index] = 1;
			});
			//This function looks up whether a pair are neighbours
			function neighboring(a, b) {
			    return linkedByIndex[a.index + "," + b.index];
			}
			function connectedNodes() {
			    if (toggle == 0) {
			        //Reduce the opacity of all but the neighbouring nodes
			        d = d3.select(this).node().__data__;
			        node.style("opacity", function (o) {
			            return neighboring(d, o) | neighboring(o, d) ? 1 : 0.1;
			        });
			        link.style("opacity", function (o) {
			            return d.index==o.source.index | d.index==o.target.index ? 1 : 0.1;
			        });
			        //Reduce the op
			        toggle = 1;
			    } else {
			        //Put them back to opacity=1
			        node.style("opacity", 1);
			        link.style("opacity", 1);
			        toggle = 0;
			    }
			}
            		
            		/* Highlightinh End */
            
      		</script>
		
            	<div id = "right" style = "float:right; width: 50%; display: inline-block;">
		<p id="selectable">
			<img src="colors/1f77b4.png" alt="1f77b4"> Anthropology		
			<img src="colors/aec7e8.png" alt="aec7e8"> Humanities		
			<img src="colors/ff7f0e.png" alt="ff7f0e"> Design Thinking	
			<img src="colors/ffbb78.png" alt="ffbb78"> Strategy		<br><br>
			<img src="colors/2ca02c.png" alt="2ca02c"> Health & Family	
			<img src="colors/98df8a.png" alt="98df8a"> Military		
			<img src="colors/d62728.png" alt="d62728"> Philosophy		
			<img src="colors/ff9896.png" alt="ff9896"> Politics		<br><br>	
			<img src="colors/9467bd.png" alt="9467bd"> Psychology		
			<img src="colors/c5b0d5.png" alt="c5b0d5"> Science & Technology	
			<img src="colors/8c564b.png" alt="8c564b"> Society		
			<img src="colors/c49c94.png" alt="c49c94"> Sociology		<br><br>
		</p>
		</div>     
</body>
